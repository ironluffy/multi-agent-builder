---
id: WP03.4
task_id: T036
title: Create AgentCore business logic class in src/core/AgentCore.ts
phase: Phase 3 - User Story 1 (MVP)
lane: done
status: pending
created_at: 2025-11-21
started_at: 2025-11-22T13:37:05Z
completed_at: 2025-11-22T13:42:49Z
estimated_time: 40min
actual_time: null
depends_on: [T026, T032]
files_modified: []
---

# WP03.4: Create AgentCore business logic class [US1]

## Objective

Create AgentCore class containing pure business logic for agent operations, separated from data access and external dependencies.

## File Paths

- `src/core/AgentCore.ts`

## Work Content

1. Create AgentCore class with methods:
   - validateAgentCreation(input): validate spawn parameters
   - calculateDepthLevel(parent_id): determine agent depth
   - generateAgentName(prefix): create unique agent names
   - validateBudgetAllocation(allocation): check budget rules
   - canSpawnChild(parent): check if parent can spawn
2. Implement business rules:
   - Max depth level validation (e.g., max 5 levels)
   - Name uniqueness checking
   - Budget allocation rules
3. Pure functions (no side effects)
4. Export AgentCore class
5. Add comprehensive JSDoc documentation

## Acceptance Criteria

- [ ] AgentCore class with business logic methods
- [ ] All methods are pure functions (no side effects)
- [ ] Max depth level validation implemented
- [ ] Agent name generation with uniqueness
- [ ] Budget allocation validation
- [ ] JSDoc comments on all methods

## Dependencies

Depends on T026 (Agent model) and T032 (SharedDatabase for queries).

## Parallel Execution

[P] Can run in parallel with T033, T034, T037.

## Unit Tests

Unit tests in tests/unit/core/AgentCore.test.ts for all business logic methods.

## Git History

**Commits**: Include [WP03.4] in commit message

## Activity Log

- 2025-11-21: Task created

- 2025-11-22T13:37:05Z: Moved from planned to doing

- 2025-11-22T13:37:05Z: Moved from doing to for_review

- 2025-11-22T13:42:49Z: Moved from for_review to done
